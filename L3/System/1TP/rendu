L3 - 2015
Thomas Perraut
mythom008@gmail.com
htts://github.com/tiger008


Exercice 4

#1
	Commande tape : ps -e (resultat similaire avec ps -A)
	Resultat :
  PID TTY          TIME CMD
    1 ?        00:00:01 systemd
    2 ?        00:00:00 kthreadd
    3 ?        00:00:02 ksoftirqd/0
    5 ?        00:00:00 kworker/0:0H
    7 ?        00:00:09 rcu_preempt
    8 ?        00:00:00 rcu_sched
    9 ?        00:00:00 rcu_bh
   10 ?        00:00:00 migration/0
   11 ?        00:00:00 watchdog/0
   12 ?        00:00:00 watchdog/1
   13 ?        00:00:00 migration/1
   14 ?        00:00:00 ksoftirqd/1
   16 ?        00:00:00 kworker/1:0H
   17 ?        00:00:00 watchdog/2
   18 ?        00:00:00 migration/2
   19 ?        00:00:00 ksoftirqd/2
   20 ?        00:00:02 kworker/2:0
   21 ?        00:00:00 kworker/2:0H
   22 ?        00:00:00 watchdog/3
   23 ?        00:00:00 migration/3
   24 ?        00:00:00 ksoftirqd/3
   25 ?        00:00:00 kworker/3:0
   26 ?        00:00:00 kworker/3:0H
   27 ?        00:00:00 khelper
   28 ?        00:00:00 kdevtmpfs
   29 ?        00:00:00 netns
   30 ?        00:00:00 perf
   31 ?        00:00:00 khungtaskd
   32 ?        00:00:00 writeback
   33 ?        00:00:00 ksmd
   34 ?        00:00:04 khugepaged
   35 ?        00:00:00 crypto
   36 ?        00:00:00 kintegrityd
   37 ?        00:00:00 bioset
   38 ?        00:00:00 kblockd
   39 ?        00:00:00 devfreq_wq
   40 ?        00:00:00 kworker/0:1
   42 ?        00:00:00 kswapd0
   43 ?        00:00:00 fsnotify_mark
   49 ?        00:00:00 kthrotld
   53 ?        00:00:00 ipv6_addrconf
   54 ?        00:00:00 deferwq
  100 ?        00:00:00 ata_sff
  101 ?        00:00:00 scsi_eh_0
  102 ?        00:00:00 scsi_tmf_0
  103 ?        00:00:00 scsi_eh_1
  104 ?        00:00:00 scsi_tmf_1
  107 ?        00:00:00 kworker/3:1
  111 ?        00:00:00 kworker/0:1H
  112 ?        00:00:00 kworker/3:1H
  113 ?        00:00:00 kworker/2:1H
  118 ?        00:00:00 kworker/1:2
  130 ?        00:00:00 jbd2/sda1-8
  131 ?        00:00:00 ext4-rsv-conver
  154 ?        00:00:01 kworker/0:2
  167 ?        00:00:02 systemd-journal
  189 ?        00:00:00 systemd-udevd
  213 ?        00:00:00 cupsd
  214 ?        00:00:05 dbus-daemon
  219 ?        00:00:10 NetworkManager
  220 ?        00:00:00 systemd-logind
  223 ?        00:00:00 login
  225 ?        00:00:00 acpi_thermal_pm
  226 ?        00:00:00 irq/89-mei_txe
  227 ?        00:00:00 kpsmoused
  240 ?        00:00:00 cfg80211
  247 ?        00:00:00 kvm-irqfd-clean
  256 ?        00:00:00 scsi_eh_2
  257 ?        00:00:00 scsi_tmf_2
  258 ?        00:00:02 usb-storage
  272 ?        00:00:00 wpa_supplicant
  273 ?        00:00:00 polkitd
  335 ?        00:00:00 dhclient
  386 ?        00:00:00 kworker/u9:0
  387 ?        00:00:00 hci0
  388 ?        00:00:00 hci0
  390 ?        00:00:00 kworker/u9:2
  395 ?        00:00:00 systemd
  397 ?        00:00:00 (sd-pam)
  400 tty1     00:00:00 bash
  406 tty1     00:00:00 startx
  428 tty1     00:00:00 xinit
  429 tty1     00:11:51 Xorg
  433 tty1     00:00:00 xf86-video-inte
  437 tty1     00:00:00 sh
  443 tty1     00:00:00 xfce4-session
  446 tty1     00:00:00 dbus-launch
  447 ?        00:00:00 dbus-daemon
  448 ?        00:00:00 kworker/1:1H
  451 ?        00:00:00 xfconfd
  455 ?        00:00:00 ssh-agent
  457 ?        00:00:01 gpg-agent
  458 tty1     00:01:36 xfwm4
  460 tty1     00:00:00 Thunar
  461 tty1     00:00:02 xfce4-panel
  463 ?        00:00:00 xfsettingsd
  465 tty1     00:00:01 xfdesktop
  470 ?        00:00:00 gvfsd
  475 ?        00:00:00 gvfsd-fuse
  477 ?        00:00:00 xfce4-power-man
  492 tty1     00:01:37 clipit
  498 tty1     00:00:00 polkit-gnome-au
  499 ?        00:00:00 xfce4-power-man
  500 tty1     00:03:39 nm-applet
  508 tty1     00:00:01 xfce4-xkb-plugi
  511 tty1     00:00:00 panel-2-mixer
  512 tty1     00:00:46 panel-13-systra
  514 tty1     00:00:05 panel-9-power-m
  516 ?        00:00:00 at-spi-bus-laun
  522 ?        00:00:00 dbus-daemon
  525 tty1     00:03:06 conky
  530 ?        00:00:02 at-spi2-registr
  531 tty1     00:02:26 conky
  542 ?        00:00:00 gvfs-udisks2-vo
  545 ?        00:00:02 udisksd
  553 ?        00:00:01 upowerd
  570 ?        00:00:00 gvfsd-trash
  598 tty1     00:00:48 terminator
  604 tty1     00:00:00 gnome-pty-helpe
  605 pts/0    00:00:00 bash
  672 ?        00:00:00 kworker/2:1
  674 ?        00:00:00 kworker/1:0
  710 pts/1    00:00:00 bash
  711 pts/2    00:00:00 bash
  889 tty1     00:05:23 firefox
  893 ?        00:00:00 gconfd-2
 1918 ?        00:00:00 kworker/u8:0
 2008 ?        00:00:00 kworker/u8:1
 2063 ?        00:00:00 kworker/2:2
 2064 ?        00:00:00 kworker/u8:2
 2065 pts/0    00:00:00 ps

 #2
 	Tous

 #3
 	Commande tape : timeout 0.0054 od /dev/urandom
 	Resultat :
0000000 110675 170457 002732 014345 023775 163473 054771 042365
0000020 064542 011661 041076 076217 064321 036156 005320 172633
0000040 155417 137123 020003 074356 056171 173534 171501 175475
0000060 176320 170040 045701 007265 111525 001014 112272 104454
0000100 034505 064345 012273 107471 102111 126755 165632 013137
0000120 135273 044344 001135 006717 021405 063722 020753 044561
0000140 064613 153561 033063 060600 050417 036534 101647 142526
0000160 024577 006470 103051 156606 174601 005655 146161 062341
0000200 100724 126250 024021 002357 056647 051743 123705 104143
0000220 022675 007176 160606 116371 000412 030414 117772 110045
0000240 156241 015554 163340 037631 106701 075373 050363 170363
0000260 166616 146651 132772 162577 130036 176713 074540 147711
0000300 142512 012574 065002 140660 045061 121004 123447 134767
0000320 143743 015522 062165 114322 057710 126417 111476 131061
0000340 025317 100322 030265 157556 144531 166110 120302 056522
0000360 107077 110602 165265 103154 176513 112474 136157 116133
0000400 007417 005655 127470 140730 001541 063537 026521 153320
0000420 012774 020054 064165 076467 033752 070636 065004 147355
0000440 017031 040217 115403 165036 065660 140454 175134 127457
0000460 145201 160577 155257 037157 121152 014317 046265 125620
0000500 051461 166403 073044 171567 167437 011151 136552 116577
0000520 031307 014423 033773 064340 000273 007156 021242 043640
0000540 024022 042642 050364 105454 106431 155167 131742 031573
0000560 117613 144356 176353 052453 061720 171145 175364 046430
0000600 105147 123306 127741 117676 137544 054253 102077 115342
0000620 136145 042520 121502 002551 136201 042246 176326 127403
0000640 025676 102211 040064 012661 115315 176555 055403 023525
0000660 152672 115353 064251 151570 044606 022203 165032 154465
0000700 045501 024361 174016 146610 074231 176767 061662 142276
0000720 164754 155104 101407 174046 001124 015243 022313 126371
0000740 125310 074417 074165 110526 047221 155614 054532 006303
0000760 075766 101763 126706 022220 041470 016321 045473 005273
0001000 071405 151111 176527 050400 105335 123712 007135 000043
0001020 151530 035060 167021 063006 146276 062644 036644 026051
0001040 060277 051711 064501 042523 110113 006730 154220 121413
0001060 156112 055405 130613 027620 135234 143107 133622 132743
0001100 021011 013014 012454 015522 123642 142441 112267 045432
0001120 020575 051236 143151 003422 021121 054046 014707 153257
0001140 132572 177202 137350 057545 030056 110661 045163 134462
0001160 105746 151236 046744 150110 175171 003760 040204 065325
0001200 075304 001502 171674 037243 040405 120533 030527 117444
0001220 020104 103404 055255 102724 176442 175504 015266 036462
0001240 156344 116340 144702 173201 005506 153375 047263 022351
0001260 001256 132176 065616 025571 055553 113445 111224 030426
0001300 155042 031354 123001 157360 146427 072471 073727 152337
0001320 137616 060174 106211 023027 100331 103203 156220 050676
0001340 117372 110623 171202 005704 023101 015605 134351 111714
0001360 130025 030215 072130 045117 152772 062122 144401 162641
0001400 174473 071166 046012 064161 004220 041774 150263 001417
0001420 022012 055141 175643 123750 035576 025642 036413 163253
0001440 165422 140633 047305 035507 140400 000376 003652 007037
0001460 066106 124401 047131 172350 005152 070232 071600 111411
0001500 147231 132202 176066 056513 176553 175172 172764 047210
0001520 170104 050154 115576 104001 035010 067643 041322 162245
0001540 101257 131467 100742 022777 136077 004530 151742 020435
0001560 143774 011765 014700 010063 125263 163727 107375 117646
0001600 014352 113557 171571 173253 114041 077073 070460 066462
0001620 045063 042460 010672 061760 124447 012570 007602 113536
0001640 115363 115444 076124 115650 065367 135262 035007 162012
0001660 161376 035616 057020 147612 002607 114066 046724 070572
0001700 034535 142147 176037 061475 152450 152316 055202 171134
0001720 102104 050614 125314 067310 132326 172763 003764 077026
0001740 063427 073603 136416 046675 053270 002370 075732 004374
0001760 144420 015452 012471 106000 073021 172351 011211 171214

 	Commande tape : timeout 0.007 od /dev/random
 	Resultat :
0000000 013173 005460 115356 001665 041445 102150 052343 120523

	Commande tape : timeout 0.1 od /dev/zero
	Resultat :
0000000 000000 000000 000000 000000 000000 000000 000000 000000
*

	Commande tape : od /dev/null
	Resultat :
0000000

#4
# a
	Commande tape : ps -o pid,tty,cmd
	Resultat :
	shell 1
  PID TT       CMD
  710 pts/1    /bin/bash
 2518 pts/1    ps -o pid,tty,cmd

	shell 2
  PID TT       CMD
  711 pts/2    /bin/bash
 2526 pts/2    ps -o pid,tty,cmd

	Reponse : Cette commande liste les processus actifs dans la console
		actuelle avec le format specifique pid,tty,cmd.

# b
	Commande tape : cat foo > /dev/pts/2

# c
	Commande tape : cat /dev/pts/2
	Constatation : les caracteres ecrient dans la console victime ne
		s'affiche pas quand ils sont lue par la console espionne.
		Et les caracteres qui s'affichent dans la console victime ne
		sont pas lus par la console espionne.

# d
	Reponse : D'une certaine maniere oui puisque cette manipulation rend
		casiement inutilisable la console victime.

Exercice 5

#1
	Code :
	#include <stdlib.h>
	#include <stdio.h>

	int	main(void)
	{
		system("ls");
		return (0);
	}

#2
	Commande tapee : echo $?
	Resultat : 0

#3
	Code :
	#include <stdlib.h>
	#include <stdio.h>

	int	main(void)
	{
		system("ls");
		exit(5);
		return (0);
	}
	Reponse : Le code de retour change pour celui donne dans exit().

#4
	Code :
	#include <stdlib.h>
	#include <stdio.h>

	int	main(void)
	{
		system("ls");
		abort();
		return (0);
	}
	Commande tapee : echo $?
	Resultat : 134
	Reponse : Il correspond normalement a une erreur d'assertion

#5
	Code :
	#include <stdio.h>
	#include <stdlib.h>

	int	main(void)
	{
		setenv("TOTO", "LOOL", 1);
		printf("%s\n", getenv("TOTO"));
		return (0);
	}

	Resultat :
		LOOL

#6
	Reponse : La modification de l'environnement est locale au processus
		ainsi, lorsque celui-ci se termine, les variables d'environnement
		retourne a leur etat connu dans le processus actuel (ici bash).
